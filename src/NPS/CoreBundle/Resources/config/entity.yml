services:
    nps.abstract.entity:
        class: NPS\CoreBundle\Services\Entity\AbstractEntityService
        arguments:
            doctrine:     @doctrine
            user_wrapper: @nps.wrapper.user
            notification: @nps.manager.notification

    nps.entity.feed:
        class: NPS\CoreBundle\Services\Entity\FeedService
        parent: nps.abstract.entity

    feed_history:
        class: NPS\CoreBundle\Services\Entity\FeedHistoryService
        parent: nps.abstract.entity

    nps.entity.filter:
        class: NPS\CoreBundle\Services\Entity\FilterService
        parent: nps.abstract.entity

    item:
        class: NPS\CoreBundle\Services\Entity\ItemService
        arguments:
            doctrine:     @doctrine
            server_cache: @snc_redis.default
            filter:       @nps.manager.filter
            later_item:   @nps.entity.later_item

    nps.entity.later:
        class: NPS\CoreBundle\Services\Entity\LaterService
        arguments:
            doctrine:     @doctrine
            server_cache: @snc_redis.default
            user_wrapper: @nps.wrapper.user
            notification: @nps.manager.notification

    nps.entity.later_item:
        class: NPS\CoreBundle\Services\Entity\LaterItemService
        arguments:
            doctrine:     @doctrine
            server_cache: @snc_redis.default
            user_item:    @nps.entity.user_item
            crawler:      @nps.manager.crawler
            queue:        @nps.launcher.queue

    nps.entity.user:
        class: NPS\CoreBundle\Services\Entity\UserService
        arguments:
            doctrine:      @doctrine
            user_wrapper:  @nps.wrapper.user
            notification:  @nps.manager.notification
            server_cache:  @snc_redis.default
            notifications: @user.notifications

    nps.entity.user_item:
        class: NPS\CoreBundle\Services\Entity\UserItemService
        parent: nps.abstract.entity